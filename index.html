<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Email Verification</title>
    <!-- 1. Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script>
  </head>
  <body>
    <h1 id="status">Verifying your email…</h1>

    <script>
      // 2. Initialize Firebase with YOUR config
      const firebaseConfig = {
        apiKey:      "AIzaSyAi5DWMZtLbC9XA218_2RdS1jZjF13kUoo",
        authDomain:  "mabskie-47c24.firebaseapp.com",
        databaseURL: "https://mabskie-47c24-default-rtdb.firebaseio.com",
        projectId:   "mabskie-47c24",
        // other settings…
      };
      firebase.initializeApp(firebaseConfig);

      // 3. Read URL params
      const params  = new URLSearchParams(window.location.search);
      const mode    = params.get('mode');
      const oobCode = params.get('oobCode');

      if (mode === 'verifyEmail' && oobCode) {
        // 4. Apply the verification code
        firebase.auth()
          .applyActionCode(oobCode)
          .then(() => {
            document.getElementById('status').textContent =
              '✅ Your email is now verified! You can close this window.';
          })
          .catch(err => {
            console.error(err);
            document.getElementById('status').textContent =
              '❌ Verification failed: ' + err.message;
          });
      } else {
        document.getElementById('status').textContent =
          '⚠️ Sorry, that link is invalid or expired.';
      }
    </script>
  </body>
</html>
